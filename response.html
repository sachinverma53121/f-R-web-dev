<!DOCTYPE html>
<html>
  <head>
    <!-- Bootstrap CSS  -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
      integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk"
      crossorigin="anonymous"
    />

    <link rel="stylesheet" href="style/bootstrap.css" />
    <link rel="stylesheet" href="style/form-style.css" />
    <title>RESULT</title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <!-- SCRIPTS TO SEND FORM DATA TO API AND GET THE RESULT -->
    <script type="text/javascript">
      // DATA VALUES VARIABLES
      var article = localStorage.getItem("Article");

      const data = {
        text: article,
      };

      function ReadCookie() {
        console.log(data);

        //WRITE VALUES IN TABLE
        document.getElementById("result").innerHTML = "Loading Result";
        document.getElementById("news").innerHTML = article;

        //POST REQUEST
        const jsonString = JSON.stringify(data);
        const xhr = new XMLHttpRequest();
        xhr.open("POST", "https://fakereal.herokuapp.com/prediction");
        xhr.setRequestHeader("Content-Type", "application/json");

        xhr.onreadystatechange = function () {
          if (xhr.readyState == XMLHttpRequest.DONE) {
            if (JSON.parse(xhr.responseText)["prediction"] == "Real") {
              document.getElementById("result").style.color = "green";
              document.getElementById("result").innerHTML = "Real";
            } else {
              document.getElementById("result").style.color = "red";
              document.getElementById("result").innerHTML = "Fake";
            }
          }
        };

        xhr.send(jsonString);
        console.log("success");
      }
    </script>
  </head>
  <body>
    <!-- NAV BAR  -->
    <nav class="navbar navbar-expand-sm bg-primary">
      <div class="container">
        <a class="navbar-brand text-white" href="#">News Check</a>
        <ul class="navbar-nav mr-auto">
          <!-- other links goes here in li like below one  -->
          <!-- <li class="nav-item">
            <a class="nav-link text-white" href="#">Home</a>
          </li> -->
        </ul>
      </div>
    </nav>

    <!-- Other Content  -->
    <div class="container">
      <div class="text-center">
        <h1 id="result">RESULT</h1>
        <div class="form-group">
          <input
            type="button"
            class="btn btn-outline-dark btn-sm"
            value="Get Result"
            onclick="ReadCookie();"
          />
        </div>
      </div>

      <div class="form-group mt-2">
        <!-- <label for="news">News Input Box</label> -->
        <textarea class="form-control" id="news" name="news" rows="20">
Paste the News article Here</textarea
        >
      </div>

      <div class="row">
        <div class="col-12 col-sm-6 mb-2">
          <a href="main.html" class="btn btn-outline-secondary btn-lg btn-block"
            >Go back</a
          >
        </div>
        <div class="col-12 col-sm-6 mb-2">
          <button type="submit" class="btn btn-outline-info btn-lg btn-block">
            Check News with Image of News
          </button>
        </div>
      </div>
    </div>

    <div>
      <p></p>
    </div>

    <!-- <nav class="navbar navbar-expand-sm bg-primary navbar-dark">
      <ul class="navbar-nav">
        <li class="nav-item active">
          <h1>News Check</h1>
        </li>
      </ul>
    </nav>
    <div>
      <p></p>
    </div>

    <h1 id="result">RESULT</h1>
    <input
      type="button"
      class="btn btn-dark btn-lg box-shadow--8dp btnclass"
      value="Get Result"
      onclick="ReadCookie();"
    />

    <div class="form-group" style="margin-left: 80px;">
      <label for="form" class="mt10 mb20">
        <textarea
          id="news"
          class="form-control"
          placeholder="Paste the News article Here "
          rows="25"
          cols="150"
          name="news"
        ></textarea>
      </label>
    </div>
    <div style="margin-left: 10px; margin-top: 2px;">
      <button
        type="button"
        class="btn btn-info btn-lg"
        onclick="goback();"
        style="margin-left: 70px;"
      >
        Go Back
      </button>
      <button
        type="button"
        class="btn btn-info btn-lg"
        style="margin-left: 640px;"
      >
        Check News with Image of News
      </button>
    </div> -->
  </body>
</html>
